/* Estilos base */
body {
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: #f4f7f6;
}

.gantt-wrapper {
    position: relative; /* Necesario para el recorte */
    overflow-x: auto; /* PERMITIR scroll horizontal natural del Gantt */
}

.gantt-container {
    position: relative; /* Permite posicionamiento para el recorte */
}

/* Gantt mejoras visuales */
.gantt .bar-progress { fill: #3b82f6; }
.gantt .grid-header { 
    fill: #f9fafb; /* Match background */
    stroke: #e5e7eb; /* Add a bottom border */
    stroke-width: 1;
}
.gantt .grid {
    stroke: #f3f4f6; /* Lighter grid lines */
}

.gantt-container {
    min-height: 400px; /* Asegurar que el contenedor no colapse */
}

/* Se usa el encabezado original del Gantt */
.gantt .grid-row:nth-child(even) { fill: #f9fafb; }
.gantt .grid-row:nth-child(odd) { fill: #ffffff; }
.gantt .tick { stroke-width: 0.2; stroke: #6b7280; }
.gantt .tick.month-separator { stroke-width: 2; stroke: #374151; opacity: 0.9; }

/* Ajustes menores al encabezado nativo */
.gantt .upper-text { font-size: 14px !important; font-weight: 700 !important; text-transform: uppercase; fill: #374151 !important; }
.gantt .lower-text { font-size: 11px !important; fill: #374151 !important; font-weight: 500 !important; }

/* Eliminación COMPLETA de marcadores del día actual */
.gantt .today-highlight,
.gantt .today,
.gantt .today-line,
.gantt .current-date-line,
.gantt .current-date-marker,
.gantt [class*="today"],
.gantt [class*="current"],
.gantt line[stroke="#ff0000"],
.gantt line[stroke="red"],
.gantt line[stroke="#000000"][stroke-width="3"],
.gantt line[stroke="black"][stroke-width="3"],
.gantt line[stroke="#000"][stroke-width="2"],
.gantt line[stroke="#000"][stroke-width="1.5"],
.gantt rect[fill="#000000"],
.gantt rect[fill="black"] { 
    display: none !important; 
    visibility: hidden !important;
    opacity: 0 !important;
}

/* Eliminar sombreados y fondos del día actual */
.gantt .grid-row.today,
.gantt .tick.today,
.gantt .header-day.today {
    background: transparent !important;
    fill: transparent !important;
    stroke: transparent !important;
}

/* Mejorar el separador entre meses */
.gantt .tick.month-separator { 
    stroke-width: 2.5 !important; 
    stroke: #9ca3af !important; 
    opacity: 1 !important; 
}

.gantt .bar-label {
    font-size: 13px;
    font-weight: 600;
}

/* Etiquetas dentro de las barras (fases principales) */
.gantt .bar-label:not(.outside) {
    text-anchor: middle; /* Centrado dentro de la barra */
}

/* Etiquetas fuera de las barras (actividades) */
.gantt .bar-label.outside {
    fill: #111827; /* Texto oscuro para etiquetas fuera de la barra */
    text-anchor: start; /* Alineado a la izquierda */
    pointer-events: none; /* Evitar capturar eventos del mouse */
}

.gantt .bar-label tspan:first-child { font-weight: 700; }

/* FASES: Estilo de la barra (contenedor) */
.gantt .bar-wrapper.gantt-bar-phase .bar {
    fill: #E5E7EB; /* Fondo gris claro */
    stroke: #9CA3AF; /* Borde sutil */
    stroke-width: 1px;
}



/* Asegurar que el SVG permita que las etiquetas fuera de la barra sean visibles */
.gantt svg { overflow: visible; }

/* Recomendación visual: pequeño margen al texto externo para separar de la barra */
.gantt .bar-label.outside { paint-order: stroke; stroke: #ffffff; stroke-width: 0; }

/* NOTA: el ajuste de texto (wrapping) dentro de SVG no soporta white-space/word-wrap.
   El corte en múltiples líneas para fases se maneja vía JavaScript creando <tspan>. */

/* Colores para las clases de tareas */
.gantt .bar-wrapper.gantt-bar-documentation .bar { fill: #6d7b8d; } /* Andes Slate */
.gantt .bar-wrapper.gantt-bar-evacuation .bar { fill: #5a6e5f; } /* Páramo Green */
.gantt .bar-wrapper.gantt-bar-medical .bar { fill: #c5a265; } /* Bruma Gold */

/* Color específico para la tarea con ID 2.9 (verde actividad) */
.gantt .bar-wrapper[data-id="2.9"] .bar { fill: #5a6e5f !important; }

/* Popup del Gantt mejorado */
.popup-wrapper { 
    background: white !important; 
    border: 1px solid #d1d5db !important;
    border-radius: 8px !important; 
    color: #111827 !important; 
    padding: 16px !important; 
    font-size: 14px !important;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif !important;
}
.popup-wrapper .title { 
    font-weight: 700 !important; 
    margin-bottom: 8px !important; 
    color: #111827 !important;
    font-size: 15px !important;
}
.popup-wrapper .details { 
    line-height: 1.5 !important; 
}
.popup-wrapper .details div { 
    margin-bottom: 4px !important; 
}
.popup-wrapper .details strong { 
    font-weight: 600 !important; 
    color: #374151 !important; 
}

/* Tabla de recursos */
.resources-table {
    animation: fadeInUp 0.3s ease-out;
}

.resources-table th {
    background-color: #f8fafc;
    font-weight: 600;
    color: #374151;
    border-bottom: 2px solid #e5e7eb;
}

.resources-table td {
    transition: background-color 0.2s ease;
}

.resources-table tbody tr:hover {
    background-color: #f8fafc !important;
    transform: scale(1.001);
    transition: all 0.2s ease;
}

/* Animación de entrada para la tabla */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Controles superiores */
.controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

.toggle-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
}

.toggle-container input[type="checkbox"] {
    cursor: pointer;
}

/* Mejoras para elementos específicos por tipo de tarea */
.bg-blue-50 {
    background-color: rgb(239 246 255) !important;
}

.bg-red-50 {
    background-color: rgb(254 242 242) !important;
}

.bg-green-50 {
    background-color: rgb(240 253 244) !important;
}

.border-l-4 {
    border-left-width: 4px !important;
}

.border-blue-400 {
    border-color: rgb(96 165 250) !important;
}

.border-red-400 {
    border-color: rgb(248 113 113) !important;
}

.border-green-400 {
    border-color: rgb(74 222 128) !important;
}

/* Responsive */
@media (max-width: 768px) {
    .controls {
        flex-direction: column;
        align-items: stretch;
        gap: 0.75rem;
    }
    
    .resources-table {
        font-size: 12px;
    }
    
    .resources-table th,
    .resources-table td {
        padding: 0.5rem;
    }
}



/* Rango oculto (tarea invisible para extender grilla) */
.gantt .bar-wrapper.gantt-hidden .bar { fill: transparent; stroke: transparent; }

/* Clase de preparación para exportación - oculta elementos problemáticos */
.preparing-for-export .gantt .arrow { display: none !important; }
.preparing-for-export .gantt-container .popup-wrapper { display: none !important; }
.preparing-for-export .gantt .bar-handle { display: none !important; }
.preparing-for-export .gantt .bar-progress-handle { display: none !important; }
.preparing-for-export .gantt .gantt-container .pointer { display: none !important; }
.preparing-for-export .gantt foreignObject { display: none !important; }

/* Asegurar que NO aparezcan elementos del día actual en PNG */
.preparing-for-export .gantt .today,
.preparing-for-export .gantt .today-highlight,
.preparing-for-export .gantt .current-date,
.preparing-for-export .gantt [class*="today"],
.preparing-for-export .gantt [class*="current"],
.preparing-for-export .gantt line[stroke="#000000"][stroke-width="3"],
.preparing-for-export .gantt line[stroke="black"][stroke-width="3"],
.preparing-for-export .gantt line[stroke="#000"][stroke-width="2"],
.preparing-for-export .gantt rect[fill="#000000"],
.preparing-for-export .gantt rect[fill="black"] { 
    display: none !important; 
    visibility: hidden !important;
    opacity: 0 !important;
}
